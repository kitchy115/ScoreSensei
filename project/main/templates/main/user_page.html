{% extends 'base.html' %}

{% block content %}
  <!-- USER INPUT (for beats per min, time signature and key) -->
  <div class="user-section">
    <div class="form-group" style="width: 200px;">
      <input type="number" name="bpm" class="form-style" placeholder="Beats per Minute" />
      <i class="input-icon uil uil-lock-alt"></i>
    </div>

    <div class="form-group mt-2" style="width: 200px;">
      <input type="number" name="key" class="form-style" placeholder="Key" />
      <i class="input-icon uil uil-lock-alt"></i>
    </div>
  </div>

  <!--
    <div class="form-group mt-2" style="width: 200px;">
      <input type="number" name="timesignature" class="form-style" placeholder="Time Signature" />
      <i class="input-icon uil uil-lock-alt"></i>
    </div>
-->
<div class = "cust-select" style = "width: 200px">
<label for = "Time Signature" style = "color: white; font-size: 16px; font-family: Tech;"> Time Signature: </label>
<select name = "Time Signature" id = "Time Signature">
	<option value = "2/4"> 2/4 </option>
	<option value = "3/4"> 3/4 </option>
	<option value = "4/4"> 4/4 </option>
</select>
</div>

  <!-- MAIN CONTENT -->

  <!-- SHEET MUSIC SETUP -->

  <!-- DISPLAY -->
  <div>
    <div class="sheet-music-container">
      <script src="opensheetmusicdisplay.min.js"></script>
      <div id="osmdCanvas"></div>
      <script>
        var osmd = new opensheetmusicdisplay.OpenSheetMusicDisplay('osmdCanvas', {
          autoResize: true,
          backend: 'svg',
          drawTitle: false,
          pageFormat: 'A4_P'
        })
        
        setInterval(renderSheet, 100)
        
        function renderSheet() {
          fetch('http://localhost:8080/sheet.musicxml', { cache: 'no-cache' })
        
          osmd.load('http://localhost:8080/sheet.musicxml').then(function () {
            osmd.render()
            // window.scrollTo(0, document.body.scrollHeight);
          })
        }
      </script>
    </div>
  </div>

  <!-- MAKE BEGIN RECORDING BUTTON (center @ bottom) -->
  <div class="bcenter">
    <a href="#" class="btn mt-4">BEGIN RECORDING</a>
  </div>
{% endblock %}
